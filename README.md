# Дерево подразделений и сотрудников

Веб-страница на Django с деревом подразделений (до 5 уровней) и списком сотрудников. Управление записями — через админку Django; фронт использует Bootstrap.

## Запуск локально
1. Создайте и активируйте виртуальное окружение (`py -3 -m venv .venv && .venv\Scripts\activate`).
2. Установите зависимости: `pip install -r requirements.txt`.
3. Примените миграции: `python manage.py migrate`.
4. Создайте суперпользователя для входа в админку: `python manage.py createsuperuser`.
5. (Опционально) Сгенерируйте демо-данные:  
   `python manage.py seed_demo --departments 25 --employees 50000`  
6. Запустите сервер: `python manage.py runserver` и откройте `http://127.0.0.1:8000/`.

## Запуск в Docker
1. Скопируйте `.env.example` в `.env` и при необходимости отредактируйте значения (секрет, креды БД). Для локального запуска `POSTGRES_HOST` оставляйте `localhost`; docker-compose сам подставит `db` для контейнера приложения.
2. Соберите и запустите контейнеры: `docker-compose up --build`.
3. Веб доступен на `http://127.0.0.1:8000/`, Postgres — на `localhost:5432`.
4. Переменные окружения берутся из `.env` (используются в `docker-compose.yml` и `org_tree/settings.py`).
5. Данные сохраняются в volume `pg_data`. Код пробрасывается внутрь контейнера (`.` -> `/app`) для удобства разработки.

## Что реализовано
- Модели `Department` (MPTT) и `Employee` с индексацией по FK, имени и дате приема.
- Админка: дерево подразделений (`MPTTModelAdmin`), поиск/фильтры для сотрудников.
- Страница `/`: дерево подразделений свернуто по умолчанию; при выборе узла показываются сотрудники выбранного отдела и его дочерних подразделений с пагинацией.
- Команда `seed_demo` генерирует 25 подразделений с глубиной 5 и ≥50 000 сотрудников (Faker), используйте параметры `--departments` и `--employees` для настройки.

## Замечания
- По умолчанию используется SQLite для простого старта; при больших объемах данных рекомендован PostgreSQL — нужно заменить настройки `DATABASES` в `org_tree/settings.py`.
- Все дополнительные зависимости перечислены в `requirements.txt`.
